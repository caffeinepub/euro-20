{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-10T15:19:47.634Z",
  "summary": "Diff adds a reusable PronunciationControl and a useSpeechSynthesis hook using the Web Speech API, integrates Play/Stop controls next to each non-empty native lesson item, and introduces a centralized 20-language codeâ†’BCP-47 mapping. One acceptance criterion around user-facing unsupported-browser messaging appears not met because the control is hidden when speech is unsupported.",
  "missing_requirements": [
    {
      "id": "REQ-9",
      "requirement": "User-facing error/empty states are shown in English if speech is unavailable or fails (e.g., 'Voice pronunciation is not supported in this browser').",
      "reason": "When speech synthesis is not supported, the hook sets an English error message, but the UI component returns null and renders nothing, so the user does not see the unsupported-browser message.",
      "evidence": [
        "frontend/src/components/PronunciationControl.tsx (returns null when !isSupported)",
        "frontend/src/hooks/useSpeechSynthesis.ts (sets error 'Voice pronunciation is not supported in this browser' when unsupported)"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.74,
  "changed_files": [
    "frontend-file-summaries.txt",
    "frontend/src/components/PronunciationControl.tsx",
    "frontend/src/hooks/useSpeechSynthesis.ts",
    "frontend/src/lib/speechSynthesisLanguages.ts",
    "frontend/src/pages/LanguageLearningPage.tsx",
    "project_state.json"
  ]
}